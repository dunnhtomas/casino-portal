---
import SimplePageLayout from '../../components/Layout/SimplePageLayout.astro';
import { NavigationCoordinator } from '../../coordinators/NavigationCoordinator';
import { EnhancedCasinoCard } from '../../components/Casino/EnhancedCasinoCard';
import type { CasinoCardData } from '../../components/Casino/EnhancedCasinoCard';
import casinos from '../../../data/casinos.json';
import { getBrandLogo } from '../../lib/getBrandLogo';

const navigationCoordinator = new NavigationCoordinator();

const title = 'Best Real Money Casinos | Top Sites for Real Cash Gaming';
const description = 'Play casino games for real money at trusted, licensed casinos. Secure deposits, fair games, and guaranteed payouts.';
const breadcrumbs = navigationCoordinator.generateBreadcrumbs('/best/real-money');

// Filter for high-rated, licensed casinos
const realMoneyCasinos = casinos
  .filter(c=> (c.ratings?.reputation || 0) >= 7 && c.licences?.length > 0)
  .sort((a, b) => (b.ratings?.reputation || 0) - (a.ratings?.reputation || 0))
  .slice(0, 15);

// Map casino data to enhanced component format
const mapCasinoToCardData = (casino: any, rank: number): CasinoCardData => {
  return {
    id: casino.slug || `casino-${rank}`,
    name: casino.brand || "Casino",
    logo: getBrandLogo(casino.url, casino.slug),
    slug: casino.slug || `casino-${rank}`,
    rating: {
      overall: Number((casino.overallRating || 9.0).toFixed(1)),
      trust: casino.ratings?.reputation || 9,
      bonuses: casino.ratings?.bonusValue || 9,
      games: casino.ratings?.games || 9,
      support: casino.ratings?.support || 9,
      payout: casino.ratings?.payout || 9
    },
    bonuses: {
      welcome: {
        amount: casino.bonuses?.welcome?.headline || "€500 Welcome Bonus",
        type: 'match' as const,
        wagering: parseInt((casino.bonuses?.welcome?.wagering || '35x').replace('x', '')) || 35
      }
    },
    features: [
      { icon: '🛡️', label: 'Licensed & Secure' },
      { icon: '💰', label: 'Real Money Gaming' },
      { icon: '⚡', label: 'Guaranteed Payouts' }
    ],
    payoutSpeed: {
      min: '24h',
      max: '72h',
      category: 'fast' as const
    },
    licenses: [
      {
        name: casino.license || "Malta Gaming Authority", 
        country: 'Malta',
        logo: '/images/license-malta.png'
      }
    ],
    established: parseInt(casino.established) || 2020,
    gameCount: casino.gameCount || 1000,
    minDeposit: casino.minDeposit || '€10',
    currencies: casino.currencies || ['EUR', 'USD'],
    languages: casino.languages || ['English'],
    isTrusted: true
  };
};

const enhancedCasinos = realMoneyCasinos.map((casino, index) => mapCasinoToCardData(casino, index + 1));
---

<SimplePageLayout 
  title={title}
  description={description}
  breadcrumbs={breadcrumbs}
>
  <main class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
    <!-- HERO SECTION -->
    <section class="bg-gradient-to-r from-gold-600 to-gold-400 text-white py-20">
      <div class="container mx-auto px-6 text-center">
        <h1 class="text-5xl font-bold mb-6">💰 Best Real Money Casinos</h1>
        <p class="text-xl text-gold-100 max-w-2xl mx-auto">
          Play for real money at trusted, licensed casinos with secure banking and guaranteed payouts
        </p>
      </div>
    </section>

    <!-- CONTENT -->
    <section class="container mx-auto px-6 py-16">
      <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
        <h2 class="text-3xl font-bold mb-6">Top Real Money Gaming Sites</h2>
        <p class="text-lg text-gray-600 mb-8">
          These licensed casinos offer secure real money gaming with verified fair play, secure banking, and reliable customer support.
        </p>
        
        <div class="grid md:grid-cols-3 gap-6 mb-8">
          <div class="text-center p-6 bg-green-50 rounded-xl">
            <div class="text-4xl mb-3">🛡️</div>
            <h3 class="font-bold mb-2">Licensed & Secure</h3>
            <p class="text-sm text-gray-600">All casinos are properly licensed and regulated</p>
          </div>
          <div class="text-center p-6 bg-blue-50 rounded-xl">
            <div class="text-4xl mb-3">💳</div>
            <h3 class="font-bold mb-2">Secure Banking</h3>
            <p class="text-sm text-gray-600">SSL encryption and trusted payment methods</p>
          </div>
          <div class="text-center p-6 bg-purple-50 rounded-xl">
            <div class="text-4xl mb-3">⚡</div>
            <h3 class="font-bold mb-2">Fast Payouts</h3>
            <p class="text-sm text-gray-600">Quick withdrawal processing guaranteed</p>
          </div>
        </div>
        
        <div class="grid md:grid-cols-2 xl:grid-cols-3 gap-8 max-w-7xl mx-auto">
          {enhancedCasinos.map((casino, index) => (
            <div class="transform hover:scale-[1.01] transition-all duration-300">
              <EnhancedCasinoCard 
                casino={casino}
                variant={index < 3 ? 'featured' : 'default'}
                client:load
              />
            </div>
          ))}
        </div>
      </div>
      
      <!-- SAFETY INFO -->
      <div class="bg-blue-50 border border-blue-200 rounded-2xl p-8">
        <h3 class="text-2xl font-bold mb-4 text-blue-800">💡 Real Money Gaming Tips</h3>
        <div class="grid md:grid-cols-2 gap-6 text-blue-700">
          <ul class="space-y-2">
            <li>• Only play at licensed casinos</li>
            <li>• Set deposit and loss limits</li>
            <li>• Read bonus terms carefully</li>
            <li>• Verify withdrawal policies</li>
          </ul>
          <ul class="space-y-2">
            <li>• Use secure payment methods</li>
            <li>• Keep records of transactions</li>
            <li>• Contact support if needed</li>
            <li>• Gamble responsibly</li>
          </ul>
        </div>
      </div>
    </section>
  </main>
</SimplePageLayout>
