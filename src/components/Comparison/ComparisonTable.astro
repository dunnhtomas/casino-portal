---
interface Props {
  casino1: any;
  casino2: any;
}

const { casino1, casino2 } = Astro.props;

const comparisonCategories = [
  { name: 'Overall Rating', key: 'rating' },
  { name: 'Welcome Bonus', key: 'bonus' },
  { name: 'Game Selection', key: 'games' },
  { name: 'Payout Speed', key: 'payout' },
  { name: 'Customer Support', key: 'support' },
  { name: 'Mobile Experience', key: 'mobile' },
  { name: 'Banking Options', key: 'banking' },
  { name: 'Security & Licensing', key: 'security' }
];

function getComparisonValue(casino: any, key: string) {
  switch (key) {
    case 'rating':
      return `${casino.rating}/10`;
    case 'bonus':
      return casino.bonus;
    case 'games':
      return '500+ Games';
    case 'payout':
      return '24-48 Hours';
    case 'support':
      return '24/7 Live Chat';
    case 'mobile':
      return 'Mobile Optimized';
    case 'banking':
      return '10+ Methods';
    case 'security':
      return 'SSL Encrypted';
    default:
      return 'Available';
  }
}

function getBetterCasino(casino1: any, casino2: any, key: string) {
  if (key === 'rating') {
    return casino1.rating > casino2.rating ? 'casino1' : 
           casino2.rating > casino1.rating ? 'casino2' : 'tie';
  }
  return 'tie'; // Default to tie for other categories
}
---

<section class="comparison-table py-16 bg-gradient-to-br from-gray-900 to-gray-800">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold text-white mb-4">Detailed Comparison</h2>
      <p class="text-gray-300 max-w-2xl mx-auto">
        Compare key features side-by-side to make an informed decision about which casino best suits your playing preferences.
      </p>
    </div>

    <div class="max-w-5xl mx-auto">
      <div class="bg-gray-50 rounded-2xl overflow-hidden shadow-lg">
        <!-- Table Header -->
        <div class="grid grid-cols-3 bg-gray-800 text-white">
          <div class="p-6 text-center">
            <h3 class="text-xl font-bold">{casino1.name}</h3>
          </div>
          <div class="p-6 text-center border-x border-gray-700">
            <h3 class="text-lg font-semibold">Feature</h3>
          </div>
          <div class="p-6 text-center">
            <h3 class="text-xl font-bold">{casino2.name}</h3>
          </div>
        </div>

        <!-- Comparison Rows -->
        {comparisonCategories.map((category, index) => {
          const winner = getBetterCasino(casino1, casino2, category.key);
          const bgClass = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';
          
          return (
            <div class={`grid grid-cols-3 ${bgClass} border-b border-gray-200 last:border-b-0`}>
              <!-- Casino 1 Value -->
              <div class={`p-6 text-center ${winner === 'casino1' ? 'bg-green-50 border-l-4 border-green-500' : ''}`}>
                <span class={`font-semibold ${winner === 'casino1' ? 'text-green-700' : 'text-gray-700'}`}>
                  {getComparisonValue(casino1, category.key)}
                </span>
                {winner === 'casino1' && (
                  <div class="text-green-600 text-sm mt-1">✓ Winner</div>
                )}
              </div>
              
              <!-- Category Name -->
              <div class="p-6 text-center border-x border-gray-700 bg-gray-900">
                <span class="font-medium text-white">{category.name}</span>
              </div>
              
              <!-- Casino 2 Value -->
              <div class={`p-6 text-center ${winner === 'casino2' ? 'bg-green-50 border-r-4 border-green-500' : ''}`}>
                <span class={`font-semibold ${winner === 'casino2' ? 'text-green-700' : 'text-gray-700'}`}>
                  {getComparisonValue(casino2, category.key)}
                </span>
                {winner === 'casino2' && (
                  <div class="text-green-600 text-sm mt-1">✓ Winner</div>
                )}
              </div>
            </div>
          );
        })}
      </div>

      <!-- Quick Summary -->
      <div class="mt-12 grid md:grid-cols-2 gap-8">
        <div class="bg-blue-50 rounded-xl p-6">
          <h3 class="text-xl font-bold text-blue-800 mb-4">{casino1.name} Highlights</h3>
          <ul class="space-y-2">
            {casino1.pros?.map((pro: string) => (
              <li class="flex items-center text-blue-700">
                <span class="text-green-500 mr-2">✓</span>
                {pro}
              </li>
            ))}
          </ul>
        </div>

        <div class="bg-purple-50 rounded-xl p-6">
          <h3 class="text-xl font-bold text-purple-800 mb-4">{casino2.name} Highlights</h3>
          <ul class="space-y-2">
            {casino2.pros?.map((pro: string) => (
              <li class="flex items-center text-purple-700">
                <span class="text-green-500 mr-2">✓</span>
                {pro}
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>